{% extends 'base.html' %} {% block head %} {% load static %}

<script src="{% static 'js/jquery.min.js' %}"></script>
<script src="{% static 'jquery-ui/external/jquery/jquery.js' %}"></script>
<script src="{% static 'jquery-ui/jquery-ui.min.js' %}"></script>
<script src="{% static 'js/game.js' %}"></script>

{% endblock %} {% block content %}

<div id="board"></div>

<div class="timer" id="timer_black"></div>
<div class="timer" id="timer_white"></div>

<script>
    init_fields();
    var moves_list = '{{ moves_list|safe }}'
    moves_list = JSON.parse(moves_list)
    var moves_list_iterator = moves_list.length - 1
    render_with_fen(moves_list[moves_list_iterator])

    document.onkeydown = function (e) {
    switch (e.key) {
        case 'ArrowUp':
            moves_list_iterator = moves_list.length - 1
            render_with_fen(moves_list[moves_list_iterator])
            break;
        case 'ArrowDown':
            moves_list_iterator = 0
            render_with_fen(moves_list[moves_list_iterator])
            break;
        case 'ArrowLeft':
            if (moves_list_iterator == 0) {return;}
            else {
            moves_list_iterator -= 1
            render_with_fen(moves_list[moves_list_iterator])
            }
            break;
        case 'ArrowRight':
            if (moves_list_iterator == moves_list.length - 1) {return;}
            else {
            moves_list_iterator += 1
            render_with_fen(moves_list[moves_list_iterator])
            }
            break;    
    }
};



</script>

{% endblock %}
